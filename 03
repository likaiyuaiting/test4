#include<stdio.h>

//sz数组总长度,n为组的起始位置,gap为的步长
void insertion_sort(int *arr,int sz,int n,int gap)
{
    int i,j,temp;
    for(i=n+gap; i<sz; i+=gap)
    {
        if(arr[i] < arr[i-gap])//每个元素与组内元素插入排序
        {
            temp = arr[i];
            j = i-gap;
            while(j>=0 && temp<arr[j])
            {
                arr[j+gap] = arr[j];
                j -= gap;
            }
            arr[j+gap] = temp;
        }
    }
}


void shell_sort(int *arr,int sz)//sz为待排数组长度
{
    int n,gap;

    //gap为步长,每次减少一半
    for(gap=sz/2; gap>0; gap/=2)
    {
        for(n=0; n<gap; n++)//共gap个组,对每组进行插入排序
          insertion_sort(arr,sz,n,gap);
    }
}

int main()
{
    int i;
    int arr[] = {5,6,7,3,2,4,1,3,1,4};
    int sz = sizeof(arr)/sizeof(arr[0]);

    shell_sort(arr,sz);

    for(i=0; i<sz; i++)
        printf("%d ",arr[i]);
    return 0;
}
